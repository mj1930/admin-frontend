(window.webpackJsonp=window.webpackJsonp||[]).push([[12],{"I5/n":function(e,i,s){"use strict";s.r(i),s.d(i,"UserPermissionModule",(function(){return U}));var r=s("ofXK"),n=s("tk/3"),t=s("tyNb"),c=s("fXoL");let o=(()=>{class e{constructor(e){this.http=e}getAllPermission(){return this.http.post("permission/list-all-permission",{skip:0,limit:1e3})}addPermission(e){return this.http.post("permission/add-permission",e)}removePermission(e){return this.http.post("permission/remove-permission",e)}getUserPermission(e){return this.http.get("permission/list-user-permission/"+e)}getUsers(e){return this.http.post("permission/get-all-users",e)}approveDisapproveUser(e){return this.http.post("permission/get-all-users",e)}}return e.\u0275fac=function(i){return new(i||e)(c.cc(n.b))},e.\u0275prov=c.Kb({token:e,factory:e.\u0275fac,providedIn:"root"}),e})();var l=s("J0GB");function a(e,i){if(1&e){const e=c.Vb();c.Ub(0,"div",14),c.Ub(1,"input",15),c.fc("change",(function(i){c.Ac(e);const s=c.hc().$implicit;return c.hc().changePermission(i,"product",s._id)})),c.Tb(),c.Ub(2,"label",16),c.Lc(3),c.Tb(),c.Tb()}if(2&e){const e=i.$implicit,s=i.index,r=c.hc(),n=r.index,t=r.$implicit;c.Ab(1),c.qc("name","chan-pr-radio-product_",n,""),c.oc("checked",null!=t&&t.permission&&(null==t?null:t.permission.indexOf("product"))>-1?0==s:1==s)("value",e.value),c.Ab(2),c.Nc(" ",e.text," ")}}function b(e,i){if(1&e){const e=c.Vb();c.Ub(0,"div",14),c.Ub(1,"input",17),c.fc("change",(function(i){c.Ac(e);const s=c.hc().$implicit;return c.hc().changePermission(i,"order",s._id)})),c.Tb(),c.Ub(2,"label",18),c.Lc(3),c.Tb(),c.Tb()}if(2&e){const e=i.$implicit,s=i.index,r=c.hc(),n=r.index,t=r.$implicit;c.Ab(1),c.qc("name","chan-pr-radio-order_",n,""),c.oc("checked",null!=t&&t.permission&&(null==t?null:t.permission.indexOf("order"))>-1?0==s:1==s)("value",e.value),c.Ab(2),c.Nc(" ",e.text," ")}}function p(e,i){if(1&e){const e=c.Vb();c.Ub(0,"div",14),c.Ub(1,"input",19),c.fc("change",(function(i){c.Ac(e);const s=c.hc().$implicit;return c.hc().changePermission(i,"seller",s._id)})),c.Tb(),c.Ub(2,"label",20),c.Lc(3),c.Tb(),c.Tb()}if(2&e){const e=i.$implicit,s=i.index,r=c.hc(),n=r.index,t=r.$implicit;c.Ab(1),c.qc("name","chan-pr-radio-seller_",n,""),c.oc("checked",null!=t&&t.permission&&(null==t?null:t.permission.indexOf("seller"))>-1?0==s:1==s)("value",e.value),c.Ab(2),c.Nc(" ",e.text," ")}}function d(e,i){if(1&e){const e=c.Vb();c.Ub(0,"div",14),c.Ub(1,"input",21),c.fc("change",(function(i){c.Ac(e);const s=c.hc().$implicit;return c.hc().changePermission(i,"user",s._id)})),c.Tb(),c.Ub(2,"label",22),c.Lc(3),c.Tb(),c.Tb()}if(2&e){const e=i.$implicit,s=i.index,r=c.hc(),n=r.index,t=r.$implicit;c.Ab(1),c.qc("name","chan-pr-radio-user",n,""),c.oc("checked",null!=t&&t.permission&&(null==t?null:t.permission.indexOf("category"))>-1?0==s:1==s)("value",e.value),c.Ab(2),c.Nc(" ",e.text," ")}}function u(e,i){if(1&e){const e=c.Vb();c.Ub(0,"div",14),c.Ub(1,"input",23),c.fc("change",(function(i){c.Ac(e);const s=c.hc().$implicit;return c.hc().changePermission(i,"permission",s._id)})),c.Tb(),c.Ub(2,"label",24),c.Lc(3),c.Tb(),c.Tb()}if(2&e){const e=i.$implicit,s=i.index,r=c.hc(),n=r.index,t=r.$implicit;c.Ab(1),c.qc("name","chan-pr-radio-permission",n,""),c.oc("checked",null!=t&&t.permission&&(null==t?null:t.permission.indexOf("permission"))>-1?0==s:1==s)("value",e.value),c.Ab(2),c.Nc(" ",e.text," ")}}function h(e,i){if(1&e&&(c.Ub(0,"tr"),c.Ub(1,"td"),c.Ub(2,"p"),c.Lc(3),c.Tb(),c.Tb(),c.Ub(4,"td"),c.Jc(5,a,4,4,"div",13),c.Tb(),c.Ub(6,"td"),c.Jc(7,b,4,4,"div",13),c.Tb(),c.Ub(8,"td"),c.Jc(9,p,4,4,"div",13),c.Tb(),c.Ub(10,"td"),c.Jc(11,d,4,4,"div",13),c.Tb(),c.Ub(12,"td"),c.Jc(13,u,4,4,"div",13),c.Tb(),c.Tb()),2&e){const e=i.$implicit,s=c.hc();c.Ab(3),c.Mc(null==e?null:e.name),c.Ab(2),c.oc("ngForOf",s.radioOptions),c.Ab(2),c.oc("ngForOf",s.radioOptions),c.Ab(2),c.oc("ngForOf",s.radioOptions),c.Ab(2),c.oc("ngForOf",s.radioOptions),c.Ab(2),c.oc("ngForOf",s.radioOptions)}}const m=[{path:"",component:(()=>{class e{constructor(e){this.userPermissionService=e,this.users=[],this.radioOptions=[{text:"Allow",value:"true"},{text:"DisAllow",value:"false"}],this.permissions=[]}ngOnInit(){this.getUserListing()}getUserListing(){this.userPermissionService.getUsers({skip:0,limit:1e4}).subscribe(e=>{this.users=e.data,this.getAllPermissions()},e=>{console.log(e)})}getAllPermissions(){this.userPermissionService.getAllPermission().subscribe(e=>{this.users.forEach(i=>{for(let s=0;s<e.data.length;s++)i._id==e.data[s].userId&&(i.permission=e.data[s].permissions)})},e=>{console.log(e)})}addPermissions(e,i){this.userPermissionService.addPermission({permission:e,userId:i}).subscribe(e=>{console.log(e)},e=>{console.log(e)})}removePermissions(e,i){this.userPermissionService.removePermission({permission:e,userId:i}).subscribe(()=>{},e=>{console.log(e)})}changePermission(e,i,s){"true"==e.target.value?this.addPermissions(i,s):this.removePermissions(i,s)}statusChange(e){let i=this.users.findIndex(i=>i._id==e._id);i>-1&&(this.users[i].isActive=!e.isActive,this.userPermissionService.approveDisapproveUser({sellerId:e._id,isActive:this.users[i].isActive}).subscribe(e=>{200===e.code&&(this.users[i].isActive=e.data.isActive)}))}}return e.\u0275fac=function(i){return new(i||e)(c.Ob(o))},e.\u0275cmp=c.Ib({type:e,selectors:[["app-user-permission"]],decls:32,vars:1,consts:[[1,"page-wrapper","chiller-theme","toggled"],[1,"page-content"],[1,"container-fluid"],[1,"row"],[1,"table-responsive","rounded","table-striped","table-bordered"],[1,"table"],[1,"grey","lighten-2","small","text-uppercase"],[1,"text-nowrap"],["scope","col"],[4,"ngFor","ngForOf"],[1,"text-center"],[1,"mb-2"],[1,"fa","fa-heart",2,"color","red"],["class","form-check",4,"ngFor","ngForOf"],[1,"form-check"],["type","radio","id","chan-pr-1-product",1,"form-check-input",3,"checked","value","name","change"],["for","chan-pr-1-product",1,"form-check-label"],["type","radio","id","chan-pr-1-order",1,"form-check-input",3,"checked","value","name","change"],["for","chan-pr-1-order",1,"form-check-label"],["type","radio","id","chan-pr-1-seller",1,"form-check-input",3,"checked","value","name","change"],["for","chan-pr-1-seller",1,"form-check-label"],["type","radio","id","chan-pr-1-user",1,"form-check-input",3,"checked","value","name","change"],["for","chan-pr-1-user",1,"form-check-label"],["type","radio","id","chan-pr-1-permission",1,"form-check-input",3,"checked","value","name","change"],["for","chan-pr-1-permission",1,"form-check-label"]],template:function(e,i){1&e&&(c.Ub(0,"div",0),c.Pb(1,"app-side-navigation"),c.Ub(2,"main",1),c.Ub(3,"div",2),c.Ub(4,"h2"),c.Lc(5,"User Rights Management"),c.Tb(),c.Pb(6,"hr"),c.Ub(7,"div",3),c.Ub(8,"div",4),c.Ub(9,"table",5),c.Ub(10,"thead",6),c.Ub(11,"tr",7),c.Ub(12,"th",8),c.Lc(13,"Name"),c.Tb(),c.Ub(14,"th",8),c.Lc(15,"Product"),c.Tb(),c.Ub(16,"th",8),c.Lc(17,"Order"),c.Tb(),c.Ub(18,"th",8),c.Lc(19,"Seller"),c.Tb(),c.Ub(20,"th",8),c.Lc(21,"Category"),c.Tb(),c.Ub(22,"th",8),c.Lc(23,"Permission"),c.Tb(),c.Tb(),c.Tb(),c.Ub(24,"tbody"),c.Jc(25,h,14,6,"tr",9),c.Tb(),c.Tb(),c.Tb(),c.Tb(),c.Ub(26,"footer",10),c.Ub(27,"div",11),c.Ub(28,"small"),c.Lc(29," \xa9 2021 made with "),c.Pb(30,"i",12),c.Lc(31," All Rights Reserved "),c.Tb(),c.Tb(),c.Tb(),c.Tb(),c.Tb(),c.Tb()),2&e&&(c.Ab(25),c.oc("ngForOf",i.users))},directives:[l.a,r.k],styles:[""]}),e})()}];let f=(()=>{class e{}return e.\u0275mod=c.Mb({type:e}),e.\u0275inj=c.Lb({factory:function(i){return new(i||e)},imports:[[t.e.forChild(m)],t.e]}),e})();var v=s("WeEj"),g=s("PCNd");let U=(()=>{class e{}return e.\u0275mod=c.Mb({type:e}),e.\u0275inj=c.Lb({factory:function(i){return new(i||e)},providers:[o,v.a],imports:[[r.b,f,n.c,g.a]]}),e})()}}]);