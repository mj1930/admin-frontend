(window.webpackJsonp=window.webpackJsonp||[]).push([[10],{ohma:function(t,e,r){"use strict";r.r(e),r.d(e,"OrderModule",(function(){return k}));var o=r("ofXK"),c=r("dbUT"),s=r("3Pt+"),n=r("tk/3"),l=r("WeEj"),b=r("PCNd"),a=r("tyNb"),i=r("fXoL");let d=(()=>{class t{constructor(t){this.http=t}addOrder(t){return this.http.post("orders/add-order",t)}getOrder(t){return this.http.post("orders/list-orders",t)}searchProduct(t){return this.http.get("products/search-products?term="+t)}getUsers(t){return this.http.post("users/get-all-users",t)}updateStatus(t){return this.http.post("orders/update-order",t)}getSortOrders(t){return this.http.post("orders/sort-order",t)}}return t.\u0275fac=function(e){return new(e||t)(i.cc(n.b))},t.\u0275prov=i.Kb({token:t,factory:t.\u0275fac,providedIn:"root"}),t})();var u=r("J0GB");function p(t,e){1&t&&(i.Ub(0,"div",30),i.Lc(1," No Product found "),i.Tb())}function m(t,e){if(1&t){const t=i.Vb();i.Ub(0,"div",32),i.Ub(1,"div",33),i.fc("click",(function(){i.Ac(t);const r=e.$implicit;return i.hc(3).setProductSearchText(r.itemName,r.productPrice)})),i.Pb(2,"img",34),i.Ub(3,"div",35),i.Ub(4,"h5",36),i.Lc(5),i.Tb(),i.Ub(6,"p",37),i.Lc(7),i.Tb(),i.Ub(8,"button",38),i.Pb(9,"i",39),i.Tb(),i.Tb(),i.Tb(),i.Tb()}if(2&t){const t=e.$implicit;i.Ab(5),i.Mc(null==t?null:t.itemName),i.Ab(2),i.Mc(null==t?null:t.description)}}function h(t,e){if(1&t&&(i.Ub(0,"div",3),i.Jc(1,m,10,2,"div",31),i.Tb()),2&t){const t=i.hc(2);i.Ab(1),i.oc("ngForOf",t.searchResult)}}function f(t,e){if(1&t&&(i.Ub(0,"div",3),i.Ub(1,"div",28),i.Ub(2,"p"),i.Lc(3,"Search Result"),i.Tb(),i.Jc(4,p,2,0,"div",29),i.Jc(5,h,2,1,"div",14),i.Tb(),i.Tb()),2&t){const t=i.hc();i.Ab(4),i.oc("ngIf",!t.searchResult.length),i.Ab(1),i.oc("ngIf",t.searchResult.length)}}function T(t,e){if(1&t&&(i.Ub(0,"option",42),i.Lc(1),i.Tb()),2&t){const t=e.$implicit;i.oc("value",t._id),i.Ab(1),i.Mc(null==t?null:t.name)}}function U(t,e){if(1&t){const t=i.Vb();i.Ub(0,"div",5),i.Ub(1,"label",6),i.Lc(2,"Select Seller"),i.Tb(),i.Ub(3,"select",40),i.fc("change",(function(){i.Ac(t);const e=i.hc();return e.changeSeller(e.seller)})),i.Jc(4,T,2,2,"option",41),i.Tb(),i.Tb()}if(2&t){const t=i.hc();i.Ab(4),i.oc("ngForOf",t.sellers)}}function g(t,e){if(1&t&&(i.Ub(0,"div",43),i.Pb(1,"input",44),i.Ub(2,"label",45),i.Lc(3),i.Tb(),i.Tb()),2&t){const t=e.$implicit;i.Ab(1),i.oc("value",t.text)("checked","Cash On Delivery"===t.text),i.Ab(2),i.Nc(" ",t.text," ")}}function v(t,e){if(1&t&&(i.Ub(0,"td"),i.Ub(1,"p"),i.Lc(2),i.Tb(),i.Tb()),2&t){const t=e.$implicit;i.Ab(2),i.Mc(null==t?null:t.name)}}function L(t,e){if(1&t&&(i.Ub(0,"td"),i.Ub(1,"p"),i.Lc(2),i.Tb(),i.Tb()),2&t){const t=e.$implicit;i.Ab(2),i.Mc(null==t?null:t.quantity)}}function y(t,e){if(1&t&&(i.Ub(0,"td"),i.Ub(1,"p"),i.Lc(2),i.Tb(),i.Tb()),2&t){const t=e.$implicit;i.Ab(2),i.Mc(null==t?null:t.sellerName)}}function O(t,e){if(1&t&&(i.Ub(0,"option",29),i.Lc(1),i.Tb()),2&t){const t=e.$implicit;i.oc("value",t.value),i.Ab(1),i.Mc(t.text)}}function A(t,e){if(1&t){const t=i.Vb();i.Ub(0,"tr"),i.Ub(1,"td",26),i.Pb(2,"input",21),i.Tb(),i.Ub(3,"td"),i.Ub(4,"p"),i.Lc(5),i.Tb(),i.Tb(),i.Ub(6,"td"),i.Ub(7,"p"),i.Lc(8),i.ic(9,"date"),i.Tb(),i.Tb(),i.Ub(10,"td"),i.Ub(11,"p"),i.Lc(12),i.Tb(),i.Tb(),i.Ub(13,"td"),i.Ub(14,"p"),i.Lc(15),i.Tb(),i.Tb(),i.Jc(16,v,3,1,"td",22),i.Jc(17,L,3,1,"td",22),i.Jc(18,y,3,1,"td",22),i.Ub(19,"td"),i.Ub(20,"p"),i.Lc(21),i.Tb(),i.Tb(),i.Ub(22,"td"),i.Ub(23,"p"),i.Lc(24),i.Tb(),i.Tb(),i.Ub(25,"td"),i.Ub(26,"p"),i.Lc(27),i.Tb(),i.Tb(),i.Ub(28,"td"),i.Ub(29,"p"),i.Lc(30),i.Tb(),i.Tb(),i.Ub(31,"td"),i.Ub(32,"select",27),i.fc("ngModelChange",(function(r){return i.Ac(t),e.$implicit.orderStatus=r}))("change",(function(r){i.Ac(t);const o=e.$implicit;return i.hc().updateStatus(o._id,r)})),i.Jc(33,O,2,2,"option",28),i.Tb(),i.Tb(),i.Tb()}if(2&t){const t=e.$implicit,r=e.index,o=i.hc();i.Ab(5),i.Mc(r+1),i.Ab(3),i.Mc(i.kc(9,13,null==t?null:t.createdAt,"medium")),i.Ab(4),i.Mc(null==t?null:t.mode),i.Ab(3),i.Mc(null==t?null:t._id),i.Ab(1),i.oc("ngForOf",null==t?null:t.products),i.Ab(1),i.oc("ngForOf",null==t?null:t.products),i.Ab(1),i.oc("ngForOf",null==t?null:t.products),i.Ab(3),i.Mc(null==t?null:t.totalAmnt),i.Ab(3),i.Mc(null==t?null:t.status),i.Ab(3),i.Mc(null==t?null:t.paymentMode),i.Ab(3),i.Mc(null==t?null:t.address),i.Ab(2),i.oc("ngModel",t.orderStatus),i.Ab(1),i.oc("ngForOf",o.orderStatuses)}}const P=[{path:"",component:(()=>{class t{constructor(t,e,r){this.fb=t,this.orderService=e,this.router=r,this.showSubMenu=!1,this.userName="",this.paymentModes=[{value:"cod",text:"Cash On Delivery"}],this.sellers=[],this.searchResult=[]}ngOnInit(){this.getSellerListing(),this.addOrderForm=this.fb.group({mode:["Phone"],products:this.fb.group({name:"",price:null,quantity:null,sellerId:"",productId:"",sellerName:""}),totalAmnt:[],address:[],userGstin:[""],businessName:[""],paymentMode:["Cash On Delivery"]}),this.userName=JSON.parse(localStorage.getItem("user")).name}addProduct(){this.orderService.addOrder(this.addOrderForm.value).subscribe(t=>{this.router.navigateByUrl("/order/order-listing")},t=>{console.log(t)})}searchProduct(){this.orderService.searchProduct(this.addOrderForm.controls.products.controls.name.value).subscribe(t=>{this.searchResult=t.data},t=>{console.log(t)})}calculateTotalAmount(){const t=this.addOrderForm.controls.products.controls.quantity.value,e=this.addOrderForm.controls.products.controls.price.value;t&&e&&String(this.addOrderForm.controls.totalAmnt.setValue(t*e))}getSellerListing(){this.orderService.getUsers({skip:0,limit:1e4}).subscribe(t=>{this.sellers=t.data},t=>{console.log(t)})}setProductSearchText(t,e,r){this.addOrderForm.controls.products.controls.name.setValue(t),this.addOrderForm.controls.products.controls.price.setValue(parseFloat(e)),this.addOrderForm.controls.products.controls.productId.setValue(r)}changeSeller(t){this.sellers.forEach(t=>{t._id===this.addOrderForm.controls.products.controls.sellerId.value&&this.addOrderForm.controls.products.controls.sellerName.setValue(t.name)})}resetForm(){this.addOrderForm.reset()}}return t.\u0275fac=function(e){return new(e||t)(i.Ob(s.c),i.Ob(d),i.Ob(a.b))},t.\u0275cmp=i.Ib({type:t,selectors:[["app-add-order"]],decls:62,vars:4,consts:[[1,"page-wrapper","chiller-theme","toggled"],[1,"page-content"],[1,"container-fluid"],[1,"row"],[1,"col",3,"formGroup","ngSubmit"],[1,"form-group"],["for",""],["formControlName","mode",1,"form-control"],["selected","","value","Phone"],["value","Whatsapp"],[1,""],["formGroupName","products"],[1,"d-flex","justify-content-between"],["type","text","formControlName","name","placeholder","Product Name",1,"form-control",3,"keyup"],["class","row",4,"ngIf"],[1,"form-group","mt-2"],["type","text","formControlName","quantity","placeholder","Product quantity",1,"form-control",3,"keyup"],["type","text","formControlName","price","placeholder","Product price",1,"form-control",3,"keyup"],["class","form-group",4,"ngIf"],["type","text","formControlName","totalAmnt","placeholder","Rs 200","disabled","",1,"form-control"],["formControlName","address",1,"form-control"],["type","text","formControlName","userGstin","placeholder","GSTIN",1,"form-control"],["type","text","formControlName","businessName","placeholder","Name of business",1,"form-control"],["class","form-check",4,"ngFor","ngForOf"],["type","submit",1,"btn","btn-primary","btn-sm","rounded","m-0"],[1,"text-center"],[1,"mb-2"],[1,"fa","fa-heart",2,"color","red"],[1,"col"],["class","mb-4",4,"ngIf"],[1,"mb-4"],["class","col-sm-4 col-md-3 col-lg-2 my-2",4,"ngFor","ngForOf"],[1,"col-sm-4","col-md-3","col-lg-2","my-2"],[1,"card","px-2","cursor-style",3,"click"],["src","https://rukminim1.flixcart.com/image/150/150/k0cqqvk0/bottle/4/v/c/1000-venice-fridge-water-bottles-120-cello-original-imafk5tysrejtyhj.jpeg",1,"card-img-top",2,"height","150px"],[1,"card-body","px-0"],[1,"card-title"],[1,"card-text"],["type","button",1,"btn","btn-success","btn-sm","mx-2"],["aria-hidden","true",1,"fa","fa-check"],["formControlName","sellerId",1,"form-control",3,"change"],[3,"value",4,"ngFor","ngForOf"],[3,"value"],[1,"form-check"],["type","radio","id","exampleRadios1","formControlName","paymentMode",1,"form-check-input",3,"value","checked"],["for","exampleRadios1",1,"form-check-label"]],template:function(t,e){1&t&&(i.Ub(0,"div",0),i.Pb(1,"app-side-navigation"),i.Ub(2,"main",1),i.Ub(3,"div",2),i.Ub(4,"h2"),i.Lc(5,"Order Booking"),i.Tb(),i.Pb(6,"hr"),i.Ub(7,"div",3),i.Ub(8,"form",4),i.fc("ngSubmit",(function(){return e.addProduct()})),i.Ub(9,"div",5),i.Ub(10,"label",6),i.Lc(11,"Mode Of Booking"),i.Tb(),i.Ub(12,"select",7),i.Ub(13,"option",8),i.Lc(14,"Phone"),i.Tb(),i.Ub(15,"option",9),i.Lc(16,"Whatsapp"),i.Tb(),i.Tb(),i.Tb(),i.Ub(17,"div",10),i.Ub(18,"div",11),i.Ub(19,"div",5),i.Ub(20,"div",12),i.Ub(21,"label",6),i.Lc(22,"Product Name"),i.Tb(),i.Tb(),i.Ub(23,"input",13),i.fc("keyup",(function(){return e.searchProduct()})),i.Tb(),i.Tb(),i.Jc(24,f,6,2,"div",14),i.Ub(25,"div",15),i.Ub(26,"label",6),i.Lc(27,"Quantity"),i.Tb(),i.Ub(28,"input",16),i.fc("keyup",(function(){return e.calculateTotalAmount()})),i.Tb(),i.Tb(),i.Ub(29,"div",15),i.Ub(30,"label",6),i.Lc(31,"Product Price (MRP)"),i.Tb(),i.Ub(32,"input",17),i.fc("keyup",(function(){return e.calculateTotalAmount()})),i.Tb(),i.Tb(),i.Jc(33,U,5,1,"div",18),i.Tb(),i.Tb(),i.Ub(34,"div",5),i.Ub(35,"label",6),i.Lc(36,"Order Total"),i.Tb(),i.Pb(37,"input",19),i.Tb(),i.Ub(38,"div",5),i.Ub(39,"label",6),i.Lc(40,"Address"),i.Tb(),i.Pb(41,"textarea",20),i.Tb(),i.Ub(42,"div",5),i.Ub(43,"label",6),i.Lc(44,"GST (Applicable only at Business Purchase)"),i.Tb(),i.Pb(45,"input",21),i.Tb(),i.Ub(46,"div",5),i.Ub(47,"label",6),i.Lc(48,"Business Name"),i.Tb(),i.Pb(49,"input",22),i.Tb(),i.Ub(50,"div",5),i.Ub(51,"label",6),i.Lc(52,"Payment Mode"),i.Tb(),i.Jc(53,g,4,3,"div",23),i.Tb(),i.Ub(54,"button",24),i.Lc(55,"Go to Details"),i.Tb(),i.Tb(),i.Tb(),i.Ub(56,"footer",25),i.Ub(57,"div",26),i.Ub(58,"small"),i.Lc(59," \xa9 2021 made with "),i.Pb(60,"i",27),i.Lc(61," All Rights Reserved "),i.Tb(),i.Tb(),i.Tb(),i.Tb(),i.Tb(),i.Tb()),2&t&&(i.Ab(8),i.oc("formGroup",e.addOrderForm),i.Ab(16),i.oc("ngIf",e.addOrderForm.controls.products.controls.name.value),i.Ab(9),i.oc("ngIf",e.sellers.length),i.Ab(20),i.oc("ngForOf",e.paymentModes))},directives:[u.a,s.t,s.k,s.e,s.q,s.j,s.d,s.n,s.s,s.f,s.b,o.l,o.k,s.o],styles:[".cursor-style[_ngcontent-%COMP%]{cursor:pointer}"]}),t})()},{path:"order-listing",component:(()=>{class t{constructor(t){this.orderService=t,this.orderStatuses=[{text:"Pending",value:"P"},{text:"Dispatched",value:"D"},{text:"Refunded",value:"RF"},{text:"Cancelled",value:"C"},{text:"Returned",value:"RT"}]}ngOnInit(){this.getOrder()}getOrder(){this.orderService.getOrder({skip:0,limit:1e4}).subscribe(t=>{this.orders=t.data,this.setOrderStaus()},t=>{console.log(t)})}updateStatus(t,e){this.orderService.updateStatus({orderId:t,status:e.target.value}).subscribe(t=>{this.getOrder()},t=>{console.log(t)})}setOrderStaus(){this.orders.forEach(t=>{switch(t.orderStatus){case"P":t.status="Pending";break;case"D":t.status="Dispatched";break;case"RF":t.status="Refunded";break;case"RT":t.status="Returned"}})}sortData(t){console.log(t);let e={key:t.target.value?t.target.value.split("-")[0]:"null",sortBy:t.target.value?"asc"===t.target.value.split("-")[1]?"1":"-1":0,skip:0,limit:1e5};this.orderService.getSortOrders(e).subscribe(t=>{200===t.code&&(this.orders=t.data,this.setOrderStaus())})}}return t.\u0275fac=function(e){return new(e||t)(i.Ob(d))},t.\u0275cmp=i.Ib({type:t,selectors:[["app-order-listing"]],decls:69,vars:1,consts:[[1,"page-wrapper","chiller-theme","toggled"],[1,"page-content"],[1,"container-fluid"],[1,"row"],[1,"filer","col","p-3","rounded","my-2","elegant-color","text-white"],[1,"col-sm-12","col-md-2"],[1,"form-control",3,"change"],["value",""],["value","createdAt-asc"],["value","createdAt-desc"],["value","name-asc"],["value","name-desc"],["value","orderStatus-asc"],["value","orderStatus-desc"],["value","sellerName-asc"],["value","sellerName-desc"],[1,"table-responsive","rounded","table-striped","table-bordered"],[1,"table"],[1,"grey","lighten-2","small","text-uppercase"],[1,"text-nowrap"],["scope","col"],["type","checkbox",2,"cursor","pointer"],[4,"ngFor","ngForOf"],[1,"text-center"],[1,"mb-2"],[1,"fa","fa-heart",2,"color","red"],["scope","row"],["name","status",1,"form-control","select-style",3,"ngModel","ngModelChange","change"],[3,"value",4,"ngFor","ngForOf"],[3,"value"]],template:function(t,e){1&t&&(i.Ub(0,"div",0),i.Pb(1,"app-side-navigation"),i.Ub(2,"main",1),i.Ub(3,"div",2),i.Ub(4,"h2"),i.Lc(5,"Order Listing"),i.Tb(),i.Pb(6,"hr"),i.Ub(7,"div",3),i.Ub(8,"div",4),i.Ub(9,"div",3),i.Ub(10,"div",5),i.Lc(11," Sort By "),i.Ub(12,"select",6),i.fc("change",(function(t){return e.sortData(t)})),i.Ub(13,"option",7),i.Lc(14,"Default"),i.Tb(),i.Ub(15,"option",8),i.Lc(16,"Order Date/Time (A - Z) "),i.Tb(),i.Ub(17,"option",9),i.Lc(18,"Order Date/Time (Z - A) "),i.Tb(),i.Ub(19,"option",10),i.Lc(20,"Product Name (A - Z) "),i.Tb(),i.Ub(21,"option",11),i.Lc(22,"Product Name (Z - A) "),i.Tb(),i.Ub(23,"option",12),i.Lc(24,"Status (A - Z) "),i.Tb(),i.Ub(25,"option",13),i.Lc(26,"Status (Z - A) "),i.Tb(),i.Ub(27,"option",14),i.Lc(28,"Seller (A - Z) "),i.Tb(),i.Ub(29,"option",15),i.Lc(30,"Seller (Z - A) "),i.Tb(),i.Tb(),i.Tb(),i.Tb(),i.Tb(),i.Ub(31,"div",16),i.Ub(32,"table",17),i.Ub(33,"thead",18),i.Ub(34,"tr",19),i.Ub(35,"th",20),i.Pb(36,"input",21),i.Tb(),i.Ub(37,"th",20),i.Lc(38,"SR NO."),i.Tb(),i.Ub(39,"th",20),i.Lc(40,"Order Date/Time"),i.Tb(),i.Ub(41,"th",20),i.Lc(42,"Mode"),i.Tb(),i.Ub(43,"th",20),i.Lc(44,"Order ID"),i.Tb(),i.Ub(45,"th",20),i.Lc(46,"Product Name"),i.Tb(),i.Ub(47,"th",20),i.Lc(48,"Quantity"),i.Tb(),i.Ub(49,"th",20),i.Lc(50,"Seller"),i.Tb(),i.Ub(51,"th",20),i.Lc(52,"Order Total (INR)"),i.Tb(),i.Ub(53,"th",20),i.Lc(54,"Status"),i.Tb(),i.Ub(55,"th",20),i.Lc(56,"Payment Mode"),i.Tb(),i.Ub(57,"th",20),i.Lc(58,"Address Details"),i.Tb(),i.Ub(59,"th",20),i.Lc(60,"Action"),i.Tb(),i.Tb(),i.Tb(),i.Ub(61,"tbody"),i.Jc(62,A,34,16,"tr",22),i.Tb(),i.Tb(),i.Tb(),i.Tb(),i.Ub(63,"footer",23),i.Ub(64,"div",24),i.Ub(65,"small"),i.Lc(66," \xa9 2021 made with "),i.Pb(67,"i",25),i.Lc(68," All Rights Reserved "),i.Tb(),i.Tb(),i.Tb(),i.Tb(),i.Tb(),i.Tb()),2&t&&(i.Ab(62),i.oc("ngForOf",e.orders))},directives:[u.a,s.n,s.s,o.k,s.q,s.j,s.m],pipes:[o.d],styles:[".select-style[_ngcontent-%COMP%]{width:130px}"]}),t})()}];let S=(()=>{class t{}return t.\u0275mod=i.Mb({type:t}),t.\u0275inj=i.Lb({factory:function(e){return new(e||t)},imports:[[a.e.forChild(P)],a.e]}),t})(),k=(()=>{class t{}return t.\u0275mod=i.Mb({type:t}),t.\u0275inj=i.Lb({factory:function(e){return new(e||t)},providers:[l.a,d],imports:[[o.b,S,c.a,s.g,s.p,n.c,b.a]]}),t})()}}]);