(window.webpackJsonp=window.webpackJsonp||[]).push([[11],{"I5/n":function(e,i,n){"use strict";n.r(i),n.d(i,"UserPermissionModule",(function(){return T}));var s=n("ofXK"),c=n("tk/3"),r=n("tyNb"),t=n("fXoL");let o=(()=>{class e{constructor(e){this.http=e}getAllPermission(){return this.http.post("permission/list-all-permission",{skip:0,limit:1e3})}addPermission(e){return this.http.post("permission/add-permission",e)}removePermission(e){return this.http.post("permission/remove-permission",e)}getUserPermission(e){return this.http.get("permission/list-user-permission/"+e)}getUsers(e){return this.http.post("permission/get-all-users",e)}approveDisapproveUser(e){return this.http.post("users/approve-disapprove-admin-user",e)}}return e.\u0275fac=function(i){return new(i||e)(t.cc(c.b))},e.\u0275prov=t.Kb({token:e,factory:e.\u0275fac,providedIn:"root"}),e})();var l=n("J0GB");function a(e,i){if(1&e){const e=t.Vb();t.Ub(0,"div",17),t.Ub(1,"input",18),t.fc("change",(function(i){t.Ac(e);const n=t.hc().$implicit;return t.hc().changePermission(i,"product",n._id)})),t.Tb(),t.Ub(2,"label",19),t.Lc(3),t.Tb(),t.Tb()}if(2&e){const e=i.$implicit,n=i.index,s=t.hc(),c=s.index,r=s.$implicit;t.Ab(1),t.qc("name","chan-pr-radio-product_",c,""),t.oc("checked",null!=r&&r.permission&&(null==r?null:r.permission.indexOf("product"))>-1?0==n:1==n)("value",e.value),t.Ab(2),t.Nc(" ",e.text," ")}}function b(e,i){if(1&e){const e=t.Vb();t.Ub(0,"div",17),t.Ub(1,"input",20),t.fc("change",(function(i){t.Ac(e);const n=t.hc().$implicit;return t.hc().changePermission(i,"order",n._id)})),t.Tb(),t.Ub(2,"label",21),t.Lc(3),t.Tb(),t.Tb()}if(2&e){const e=i.$implicit,n=i.index,s=t.hc(),c=s.index,r=s.$implicit;t.Ab(1),t.qc("name","chan-pr-radio-order_",c,""),t.oc("checked",null!=r&&r.permission&&(null==r?null:r.permission.indexOf("order"))>-1?0==n:1==n)("value",e.value),t.Ab(2),t.Nc(" ",e.text," ")}}function p(e,i){if(1&e){const e=t.Vb();t.Ub(0,"div",17),t.Ub(1,"input",22),t.fc("change",(function(i){t.Ac(e);const n=t.hc().$implicit;return t.hc().changePermission(i,"seller",n._id)})),t.Tb(),t.Ub(2,"label",23),t.Lc(3),t.Tb(),t.Tb()}if(2&e){const e=i.$implicit,n=i.index,s=t.hc(),c=s.index,r=s.$implicit;t.Ab(1),t.qc("name","chan-pr-radio-seller_",c,""),t.oc("checked",null!=r&&r.permission&&(null==r?null:r.permission.indexOf("seller"))>-1?0==n:1==n)("value",e.value),t.Ab(2),t.Nc(" ",e.text," ")}}function u(e,i){if(1&e){const e=t.Vb();t.Ub(0,"div",17),t.Ub(1,"input",24),t.fc("change",(function(i){t.Ac(e);const n=t.hc().$implicit;return t.hc().changePermission(i,"user",n._id)})),t.Tb(),t.Ub(2,"label",25),t.Lc(3),t.Tb(),t.Tb()}if(2&e){const e=i.$implicit,n=i.index,s=t.hc(),c=s.index,r=s.$implicit;t.Ab(1),t.qc("name","chan-pr-radio-user",c,""),t.oc("checked",null!=r&&r.permission&&(null==r?null:r.permission.indexOf("category"))>-1?0==n:1==n)("value",e.value),t.Ab(2),t.Nc(" ",e.text," ")}}function d(e,i){if(1&e){const e=t.Vb();t.Ub(0,"div",17),t.Ub(1,"input",26),t.fc("change",(function(i){t.Ac(e);const n=t.hc().$implicit;return t.hc().changePermission(i,"permission",n._id)})),t.Tb(),t.Ub(2,"label",27),t.Lc(3),t.Tb(),t.Tb()}if(2&e){const e=i.$implicit,n=i.index,s=t.hc(),c=s.index,r=s.$implicit;t.Ab(1),t.qc("name","chan-pr-radio-permission",c,""),t.oc("checked",null!=r&&r.permission&&(null==r?null:r.permission.indexOf("permission"))>-1?0==n:1==n)("value",e.value),t.Ab(2),t.Nc(" ",e.text," ")}}function h(e,i){if(1&e){const e=t.Vb();t.Ub(0,"div",17),t.Ub(1,"input",28),t.fc("change",(function(i){t.Ac(e);const n=t.hc().$implicit;return t.hc().changePermission(i,"payments",n._id)})),t.Tb(),t.Ub(2,"label",29),t.Lc(3),t.Tb(),t.Tb()}if(2&e){const e=i.$implicit,n=i.index,s=t.hc(),c=s.index,r=s.$implicit;t.Ab(1),t.qc("name","chan-pr-radio-permission",c,""),t.oc("checked",null!=r&&r.permission&&(null==r?null:r.permission.indexOf("payments"))>-1?0==n:1==n)("value",e.value),t.Ab(2),t.Nc(" ",e.text," ")}}function m(e,i){if(1&e){const e=t.Vb();t.Ub(0,"tr"),t.Ub(1,"td"),t.Ub(2,"p"),t.Lc(3),t.Tb(),t.Ub(4,"p"),t.Lc(5),t.Tb(),t.Tb(),t.Ub(6,"td"),t.Jc(7,a,4,4,"div",13),t.Tb(),t.Ub(8,"td"),t.Jc(9,b,4,4,"div",13),t.Tb(),t.Ub(10,"td"),t.Jc(11,p,4,4,"div",13),t.Tb(),t.Ub(12,"td"),t.Jc(13,u,4,4,"div",13),t.Tb(),t.Ub(14,"td"),t.Jc(15,d,4,4,"div",13),t.Tb(),t.Ub(16,"td"),t.Jc(17,h,4,4,"div",13),t.Tb(),t.Ub(18,"td"),t.Ub(19,"div",14),t.Ub(20,"input",15),t.fc("change",(function(){t.Ac(e);const n=i.$implicit;return t.hc().statusChange(n)})),t.Tb(),t.Ub(21,"label",16),t.Lc(22),t.Tb(),t.Tb(),t.Tb(),t.Tb()}if(2&e){const e=i.$implicit,n=t.hc();t.Ab(3),t.Mc(null==e?null:e.name),t.Ab(2),t.Mc(null==e?null:e.email),t.Ab(2),t.oc("ngForOf",n.radioOptions),t.Ab(2),t.oc("ngForOf",n.radioOptions),t.Ab(2),t.oc("ngForOf",n.radioOptions),t.Ab(2),t.oc("ngForOf",n.radioOptions),t.Ab(2),t.oc("ngForOf",n.radioOptions),t.Ab(2),t.oc("ngForOf",n.radioOptions),t.Ab(3),t.qc("id","_",null==e?null:e._id,""),t.qc("name","_",null==e?null:e._id,""),t.oc("checked",!(null==e||!e.isActive)),t.Ab(1),t.qc("for","_",null==e?null:e._id,""),t.Ab(1),t.Mc(null!=e&&e.isActive?"Active":"InActive")}}const f=[{path:"",component:(()=>{class e{constructor(e){this.userPermissionService=e,this.users=[],this.radioOptions=[{text:"Allow",value:"true"},{text:"DisAllow",value:"false"}],this.permissions=[]}ngOnInit(){this.getUserListing()}getUserListing(){this.userPermissionService.getUsers({skip:0,limit:1e4}).subscribe(e=>{this.users=e.data,this.getAllPermissions()},e=>{console.log(e)})}getAllPermissions(){this.userPermissionService.getAllPermission().subscribe(e=>{this.users.forEach(i=>{for(let n=0;n<e.data.length;n++)i._id==e.data[n].userId&&(i.permission=e.data[n].permissions)})},e=>{console.log(e)})}addPermissions(e,i){this.userPermissionService.addPermission({permission:e,userId:i}).subscribe(e=>{console.log(e)},e=>{console.log(e)})}removePermissions(e,i){this.userPermissionService.removePermission({permission:e,userId:i}).subscribe(()=>{},e=>{console.log(e)})}changePermission(e,i,n){"true"==e.target.value?this.addPermissions(i,n):this.removePermissions(i,n)}statusChange(e){let i=this.users.findIndex(i=>i._id==e._id);i>-1&&(this.users[i].isActive=!e.isActive,this.userPermissionService.approveDisapproveUser({userId:e._id,status:this.users[i].isActive}).subscribe(e=>{200===e.code&&(this.users[i].isActive=e.data.isActive)}))}}return e.\u0275fac=function(i){return new(i||e)(t.Ob(o))},e.\u0275cmp=t.Ib({type:e,selectors:[["app-user-permission"]],decls:36,vars:1,consts:[[1,"page-wrapper","chiller-theme","toggled"],[1,"page-content"],[1,"container-fluid"],[1,"row"],[1,"table-responsive","rounded","table-striped","table-bordered"],[1,"table"],[1,"grey","lighten-2","small","text-uppercase"],[1,"text-nowrap"],["scope","col"],[4,"ngFor","ngForOf"],[1,"text-center"],[1,"mb-2"],[1,"fa","fa-heart",2,"color","red"],["class","form-check",4,"ngFor","ngForOf"],[1,"custom-control","custom-switch","my-n2"],["type","checkbox",1,"custom-control-input",3,"id","name","checked","change"],[1,"custom-control-label","cursor-pointer","my-2",3,"for"],[1,"form-check"],["type","radio","id","chan-pr-1-product",1,"form-check-input",3,"checked","value","name","change"],["for","chan-pr-1-product",1,"form-check-label"],["type","radio","id","chan-pr-1-order",1,"form-check-input",3,"checked","value","name","change"],["for","chan-pr-1-order",1,"form-check-label"],["type","radio","id","chan-pr-1-seller",1,"form-check-input",3,"checked","value","name","change"],["for","chan-pr-1-seller",1,"form-check-label"],["type","radio","id","chan-pr-1-user",1,"form-check-input",3,"checked","value","name","change"],["for","chan-pr-1-user",1,"form-check-label"],["type","radio","id","chan-pr-1-permission",1,"form-check-input",3,"checked","value","name","change"],["for","chan-pr-1-permission",1,"form-check-label"],["type","radio","id","chan-pr-2-permission",1,"form-check-input",3,"checked","value","name","change"],["for","chan-pr-2-permission",1,"form-check-label"]],template:function(e,i){1&e&&(t.Ub(0,"div",0),t.Pb(1,"app-side-navigation"),t.Ub(2,"main",1),t.Ub(3,"div",2),t.Ub(4,"h2"),t.Lc(5,"User Rights Management"),t.Tb(),t.Pb(6,"hr"),t.Ub(7,"div",3),t.Ub(8,"div",4),t.Ub(9,"table",5),t.Ub(10,"thead",6),t.Ub(11,"tr",7),t.Ub(12,"th",8),t.Lc(13,"Name"),t.Tb(),t.Ub(14,"th",8),t.Lc(15,"Product"),t.Tb(),t.Ub(16,"th",8),t.Lc(17,"Order"),t.Tb(),t.Ub(18,"th",8),t.Lc(19,"Seller"),t.Tb(),t.Ub(20,"th",8),t.Lc(21,"Category"),t.Tb(),t.Ub(22,"th",8),t.Lc(23,"Permission"),t.Tb(),t.Ub(24,"th",8),t.Lc(25,"Payments"),t.Tb(),t.Ub(26,"th",8),t.Lc(27,"Action"),t.Tb(),t.Tb(),t.Tb(),t.Ub(28,"tbody"),t.Jc(29,m,23,13,"tr",9),t.Tb(),t.Tb(),t.Tb(),t.Tb(),t.Ub(30,"footer",10),t.Ub(31,"div",11),t.Ub(32,"small"),t.Lc(33," \xa9 2021 made with "),t.Pb(34,"i",12),t.Lc(35," All Rights Reserved "),t.Tb(),t.Tb(),t.Tb(),t.Tb(),t.Tb(),t.Tb()),2&e&&(t.Ab(29),t.oc("ngForOf",i.users))},directives:[l.a,s.k],styles:[""]}),e})()}];let v=(()=>{class e{}return e.\u0275mod=t.Mb({type:e}),e.\u0275inj=t.Lb({factory:function(i){return new(i||e)},imports:[[r.f.forChild(f)],r.f]}),e})();var g=n("WeEj"),U=n("PCNd");let T=(()=>{class e{}return e.\u0275mod=t.Mb({type:e}),e.\u0275inj=t.Lb({factory:function(i){return new(i||e)},providers:[o,g.a],imports:[[s.b,v,c.c,U.a]]}),e})()}}]);